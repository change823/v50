# 管理后台使用指南

## 🎯 访问地址

### 本地开发
```
http://localhost:5173/admin
```

### 生产环境
```
https://你的域名.com/admin
```

---

## 🔐 登录管理后台

### 步骤 1：访问后台

在浏览器中访问 `/admin` 路径

### 步骤 2：输入凭据

使用您在 Supabase 中创建的管理员账号：
- **邮箱**：您在 Supabase Authentication 中创建的用户邮箱
- **密码**：对应的密码

### 步骤 3：登录

点击"登录"按钮即可进入管理后台

---

## 📊 管理功能

### 1. 查看文案列表

登录后，您可以看到所有提交的文案，包括：
- **全部**：所有状态的文案
- **待审核** (pending)：用户提交但还未审核的文案
- **已激活** (active)：已通过审核，在首页展示的文案
- **已拒绝** (rejected)：审核未通过的文案

### 2. 审核文案

对于**待审核**的文案，您可以：

#### ✅ 通过
- 点击"通过"按钮
- 文案状态变为 `active`
- 用户可以在首页看到这条文案

#### ❌ 拒绝
- 点击"拒绝"按钮
- 文案状态变为 `rejected`
- 文案不会在首页显示

### 3. 删除文案

对于**待审核** (pending) 状态的文案：
- 点击"删除"按钮
- 确认后永久删除

⚠️ **注意**：根据当前 RLS 策略，只能删除 `pending` 状态的文案，`active` 和 `rejected` 状态无法删除（防止误删）。

### 4. 统计信息

顶部显示各状态文案数量：
- 全部数量
- 待审核数量
- 已激活数量
- 已拒绝数量

### 5. 分页浏览

- 每页显示 10 条
- 可以翻页查看

---

## 🔧 管理员账号设置

### 创建管理员账号

在 Supabase Dashboard：

1. 进入 **Authentication** → **Users**
2. 点击 **Add user** 或 **Invite user**
3. 输入：
   - Email: `admin@example.com`（您的管理员邮箱）
   - Password: 设置一个强密码
4. 点击创建

### 多个管理员

您可以创建多个管理员账号：
- 不同的邮箱和密码
- 所有认证用户都有管理权限
- 通过 Supabase Authentication 统一管理

---

## 🚀 快速开始

### 第一次使用

1. **确保已导入数据**
   ```bash
   # 如果还没导入，先导入数据
   node scripts/import-data.js
   ```

2. **启动开发服务器**
   ```bash
   npm run dev
   ```

3. **访问管理后台**
   ```
   http://localhost:5173/admin
   ```

4. **登录**
   - 使用 Supabase 中创建的账号登录

5. **审核文案**
   - 查看待审核列表
   - 逐条审核：通过/拒绝/删除

---

## 📱 使用建议

### 审核流程

1. **每天检查**
   - 定期查看待审核文案
   - 及时处理用户提交

2. **审核标准**
   - 内容健康、无违规信息
   - 符合"疯狂星期四"主题
   - 有趣、幽默

3. **批量审核**
   - 先筛选到"待审核"标签页
   - 逐条快速审核

### 内容管理

1. **定期清理**
   - 删除重复的文案
   - 删除质量较低的待审核内容

2. **保持活跃**
   - 定期更新内容
   - 激活新的优质文案

---

## 🔒 安全提示

1. **保护管理员账号**
   - 使用强密码
   - 不要分享账号
   - 定期更换密码

2. **谨慎删除**
   - 删除操作不可恢复
   - 删除前确认内容

3. **登出**
   - 使用完毕后点击"登出"
   - 防止他人使用您的账号

---

## 🐛 常见问题

### Q1: 无法登录怎么办？

**检查项**:
1. 确认邮箱和密码正确
2. 确认账号已在 Supabase Authentication 中创建
3. 检查网络连接
4. 查看浏览器控制台错误信息

### Q2: 看不到文案列表？

**原因**:
- 数据库中没有数据
- RLS 策略未正确配置
- 未登录或登录失败

**解决**:
1. 确认已导入数据
2. 检查 RLS 策略（参考 `scripts/optimize-rls-policies.sql`）
3. 确认已成功登录

### Q3: 无法删除 active 文案？

**原因**: 这是 RLS 策略的保护机制

**解决**:
- 当前策略只允许删除 `pending` 状态的文案
- 如需删除 `active` 文案，可以：
  1. 先改为 `rejected` 状态
  2. 或在 Supabase Dashboard 直接删除
  3. 或修改 RLS 策略（不推荐）

### Q4: 忘记管理员密码？

**解决**:
1. 在 Supabase Dashboard → Authentication → Users
2. 找到对应用户
3. 点击 **Reset password** 重置密码

---

## 📞 技术支持

如果遇到问题：

1. 查看浏览器控制台错误信息
2. 检查 Supabase Dashboard 的日志
3. 参考 `ADMIN_SETUP.md` 文档
4. 查看 `ARCHITECTURE_OPTIONS.md` 了解系统架构

---

## 🎉 总结

管理后台功能：
- ✅ `/admin` 访问管理后台
- ✅ 邮箱+密码登录
- ✅ 查看所有文案
- ✅ 审核待审核文案（通过/拒绝）
- ✅ 删除待审核文案
- ✅ 状态筛选和分页
- ✅ 统计信息展示

祝您使用愉快！🚀
